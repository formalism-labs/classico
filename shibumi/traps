
#----------------------------------------------------------------------------------------------

add_exit_trap() {
	local new_trap="$1"
	local current_trap="$(trap -p EXIT | sed -n "s/.*trap -- '\(.*\)' EXIT/\1/p")"
	trap "${current_trap:+$current_trap; }$new_trap" EXIT
}

#----------------------------------------------------------------------------------------------
